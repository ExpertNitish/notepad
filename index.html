<script>
const textarea = document.getElementById('notepad');
const toggleBtn = document.getElementById('toggleTheme');
const body = document.body;

// Load saved text
textarea.value = localStorage.getItem('savedText') || '';

// Load saved theme or default to dark mode
let darkMode = localStorage.getItem('darkMode');
if (darkMode === null) {
    darkMode = true; // default to dark mode
    localStorage.setItem('darkMode', darkMode);
} else {
    darkMode = darkMode === 'true';
}
applyTheme(darkMode);

// Auto-save text
textarea.addEventListener('input', () => {
    localStorage.setItem('savedText', textarea.value);
});

// Theme toggle
toggleBtn.addEventListener('click', () => {
    darkMode = !darkMode;
    localStorage.setItem('darkMode', darkMode);
    applyTheme(darkMode);
});

function applyTheme(isDark) {
    if (isDark) {
        body.style.background = 'var(--bg-dark)';
        textarea.style.backgroundColor = '#2e2e44';
        textarea.style.color = 'var(--text-dark)';
        toggleBtn.textContent = 'Light Mode';
    } else {
        body.style.background = 'var(--bg-light)';
        textarea.style.backgroundColor = 'white';
        textarea.style.color = 'var(--text-light)';
        toggleBtn.textContent = 'Dark Mode';
    }
}
</script>
